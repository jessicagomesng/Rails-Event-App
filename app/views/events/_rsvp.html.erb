<% if @rsvp.status != nil %> 
    <p class="label">You are already <%= @rsvp.status %> this event.<br>
    Would you like to remove your RSVP/waitlist request?</p>

    <%= button_to "Yes", { :controller => :rsvps, :action => :destroy, :id => current_user.id }, :method => :delete, data: { confirm: "Are you sure? You will forfeit your RSVP/place in line." } %>
<% else %>
    <%= form_for(@rsvp) do |f| %>
        <% if @rsvp.errors.any? %>
            <div id="error_explanation">
            <p>Sorry, please fix the listed errors and try again.%></p>
            <ul>
                <% @rsvp.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                <% end %>
            </ul> 
            </div>
        <% end %>

        <%= f.hidden_field :event_id %>
        <%= f.hidden_field :user_id %>
        <% if @event.full %>
            <p class="label">Sorry, this event is full! Would you like to join the waiting list?<br>
            There are currently @event.waiting_count users in line.</p>
            <%= f.hidden_field :status, :value => "waiting" %>
            <%= f.submit "Join the Waiting List %>
        <% else %>
            <p class="label">Would you like to attending this event?</p>
            <%= f.hidden_field :status, :value => "attending" %>
            <%= f.submit "RSVP" %>
        <% end %>
    <% end %>
<% end %>



